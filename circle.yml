machine:
  node:
    version: 5.12.0

dependencies:
  override:
    - sudo apt-get install -y expect lftp
    - npm install -g gulp bower
    - npm install
    - bower install

deployment:
  staging:
    owner: votedotorg
    branch: master
    commands:
      - gulp --production
      - lftp -u votedotorg,${FTP_PASS} $FTP_HOST -e "mirror --exclude node_modules -exclude bower_components --only-newer --reverse ./ webapps/stage/wp-content/themes/votedotorg/; quit"